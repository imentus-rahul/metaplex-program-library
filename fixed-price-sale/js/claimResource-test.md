### result
```
imentus@imentus:~/Documents/im-client/mpl-fork/metaplex-program-library/fixed-price-sale/js$ node test/claimResource.test.js 
TAP version 13
# claim resource: success
ðŸš€ ~ file: claimResource.test.ts ~ line 37 ~ test ~ transactionHandler 8ysqzwLPxNEQTfyUuAtm39U9q8JKLJ9Hr4r7tNbyUnwz
ðŸš€ ~ file: claimResource.test.ts ~ line 37 ~ test ~ connection http://127.0.0.1:8899/
ðŸš€ ~ file: claimResource.test.ts ~ line 37 ~ test ~ payer 8ysqzwLPxNEQTfyUuAtm39U9q8JKLJ9Hr4r7tNbyUnwz
ok 1 confirmed transaction has no error
ðŸš€ ~ file: claimResource.test.ts ~ line 51 ~ test ~ store FkxqkeyhACNBJkD33mnMGYUVwFVNyfCSB5bipdrAyxMx
ok 2 confirmed transaction has no error
ok 3 confirmed transaction has no error
ðŸš€ ~ file: claimResource.test.ts ~ line 54 ~ test ~ resourceMint 5uqKHTL6fTud29r89Auiaq5ymC5VMAY2d93CZWW6ePe8
ðŸš€ ~ file: claimResource.test.ts ~ line 54 ~ test ~ vaultOwnerBump 255
ðŸš€ ~ file: claimResource.test.ts ~ line 54 ~ test ~ vaultOwner HS32xEjYxXtMUzsfqeuYztQ8NuETpc6TPtq8HbyZoE4S
ðŸš€ ~ file: claimResource.test.ts ~ line 54 ~ test ~ vault 43UKPwwFqdC66juCGGCvb8m74X25bgD24GUnkP3bAbU9
ðŸš€ ~ file: claimResource.test.ts ~ line 54 ~ test ~ sellingResource Aq1EzjocQREmja4gHjBjKFZJe3j97kDF17yVumw59sx4
ðŸš€ ~ file: claimResource.test.ts ~ line 69 ~ test ~ treasuryMint 4REx4cuZPzUQqoFrUcG2kz2mSTnhoadtozMHajahfWFZ
ðŸš€ ~ file: claimResource.test.ts ~ line 74 ~ test ~ userTokenAcc 6cSra3djf7Smp9nEqPoRfPkEx35cF81damKUgtxFBD9A
ðŸš€ ~ file: claimResource.test.ts ~ line 77 ~ test ~ startDate 1644776524
ok 4 confirmed transaction has no error
ok 5 confirmed transaction has no error
ðŸš€ ~ file: claimResource.test.ts ~ line 89 ~ test ~ treasuryOwner ENwaQc2hekcXkYNcyhPcVDymUDrNv32y6P86VLfZndjo
ðŸš€ ~ file: claimResource.test.ts ~ line 89 ~ test ~ treasuryOwnerBump 255
ðŸš€ ~ file: claimResource.test.ts ~ line 89 ~ test ~ treasuryHolder 3tBiGtLcyunHPPcVXqq4omHB2iMmgQWqyLA6mdhC29Di
ðŸš€ ~ file: claimResource.test.ts ~ line 89 ~ test ~ market Cyv5nQP8UFgiqcgR5Kxya3cH7Q2z2D4LAUvBsdX9gDB1
ðŸš€ ~ file: claimResource.test.ts ~ line 109 ~ test ~ tradeHistory BupQjre6ErRDdBPiU22pVyAAk53f3Z5rbNpe4yBAzdmK
ðŸš€ ~ file: claimResource.test.ts ~ line 106 ~ test ~ tradeHistoryBump 254
ðŸš€ ~ file: claimResource.test.ts ~ line 113 ~ test ~ newMint rGKYhBU3JoCTyeMeGXkAMrPR3bvmxKdy8PjiouRdRzJ
ðŸš€ ~ file: claimResource.test.ts ~ line 122 ~ test ~ newMintEdition ENY3t6xa11nuKwXnNWh84DFMNyTgWNBdfAFUXdE3XHTD
ðŸš€ ~ file: claimResource.test.ts ~ line 124 ~ test ~ newMintMetadata 9Bs6kVYJ6aANsfMJy1uyi9Rpxs8akpg4sSJTUhkQZ6D8
ðŸš€ ~ file: claimResource.test.ts ~ line 127 ~ test ~ resourceMintMasterEdition EBCKrm2S9RPWkYt4PXzVqAp8wCj11cvFDZjL5H4Kjgrp
ðŸš€ ~ file: claimResource.test.ts ~ line 129 ~ test ~ resourceMintMetadata FaqZ5zcNVikpkDW9Eko3TAaBE8MPHLG7qF6G2nsgPeDR
ðŸš€ ~ file: claimResource.test.ts ~ line 131 ~ test ~ resourceMintEditionMarker CKF4z7uzMHMKTXKpUveRz7LiT7iga1KPRNykiXxq5VFz
ðŸš€ ~ file: claimResource.test.ts ~ line 136 ~ test ~ buyTx Transaction {
  signatures: [],
  feePayer: PublicKey {
    _bn: <BN: 7693d2feda931f351c6374c157661dc59dcf8e0ceaaa7ce0a5e05399298d4781>
  },
  instructions: [
    TransactionInstruction {
      keys: [Array],
      programId: [PublicKey],
      data: <Buffer 66 06 3d 12 01 da eb ea fe ff>
    }
  ],
  recentBlockhash: '8BtakcmrzbVMbd12TXnapdwoRu2YdNMp7moeC9ZRi66T',
  nonceInfo: undefined
}
ðŸš€ ~ file: claimResource.test.ts ~ line 161 ~ test ~ buyRes 3tzQPwv3Dk5yhh6ESgUqzh6ZDjXrPZuAZ8dntMimh6YXefPXA1uMqAm8KBPigti2BezWFZj1wxviKBEnKgeSDF4H
ok 6 confirmed transaction has no error
ðŸš€ ~ file: claimResource.test.ts ~ line 174 ~ test ~ marketTx - closeMarket Transaction {
  signatures: [
    {
      signature: <Buffer 0b 60 4d 52 9a 89 88 9a 34 1c 97 07 2f fd a2 42 3b 77 28 6e 13 da 1d 4a 00 ad 66 5b e7 45 14 f3 9e 75 fd 23 af 0d 3d 2f 6c bb f8 cd e5 97 74 2c 5b 6f ... 14 more bytes>,
      publicKey: [PublicKey]
    }
  ],
  feePayer: PublicKey {
    _bn: <BN: 7693d2feda931f351c6374c157661dc59dcf8e0ceaaa7ce0a5e05399298d4781>
  },
  instructions: [
    TransactionInstruction {
      keys: [Array],
      programId: [PublicKey],
      data: <Buffer 58 9a f8 ba 30 0e 7b f4>
    }
  ],
  recentBlockhash: '6KmFCqL238bEUWQyRdn83cm3S69gbAvyDc93jwgM6oyj',
  nonceInfo: undefined
}
ðŸš€ ~ file: claimResource.test.ts ~ line 181 ~ test ~ marketRes 23zrhJLT76pDFUATDXNPrnMBkJ2kWnTjBnrTgd3L8DQJ1GZ5bFbGQ4B9eTz72iQTyWmWdDyvNW5xeibTAUREaCQK
ok 7 confirmed transaction has no error
ðŸš€ ~ file: claimResource.test.ts ~ line 187 ~ test ~ payoutTicketBump 254
ðŸš€ ~ file: claimResource.test.ts ~ line 190 ~ test ~ payoutTicket 5EV4dT3HeWHDbNKMs3Rrt4QPQFxkP8bnwsGCTfZ5Xre4
ðŸš€ ~ file: claimResource.test.ts ~ line 199 ~ test ~ destination CuZRM9N6Wb8YpRogfZtgEwH7FwnvHeb9g46mNohVh6bS
ðŸš€ ~ file: claimResource.test.ts ~ line 202 ~ test ~ metadata FaqZ5zcNVikpkDW9Eko3TAaBE8MPHLG7qF6G2nsgPeDR
ðŸš€ ~ file: claimResource.test.ts ~ line 218 ~ test ~ withdrawTx Transaction {
  signatures: [
    {
      signature: <Buffer 26 40 e1 5c cf c0 b6 53 69 85 ce 18 14 8c f8 46 23 06 f2 b7 ce ef 21 70 70 4e 67 5a a5 36 0c 6a e3 8d d5 ef 59 44 86 0e 00 82 c2 da 6e 86 1f d5 07 0d ... 14 more bytes>,
      publicKey: [PublicKey]
    }
  ],
  feePayer: PublicKey {
    _bn: <BN: 7693d2feda931f351c6374c157661dc59dcf8e0ceaaa7ce0a5e05399298d4781>
  },
  instructions: [
    TransactionInstruction {
      keys: [Array],
      programId: [PublicKey],
      data: <Buffer b7 12 46 9c 94 6d a1 22 ff fe>
    }
  ],
  recentBlockhash: '4FvoWMXAKhhmR6AA3qpJ8CR35MLNX8hsxP2dQTRQhSnd',
  nonceInfo: undefined
}
ðŸš€ ~ file: claimResource.test.ts ~ line 225 ~ test ~ withdrawRes 42opt9WEmgcoXVgmYbpED9goEhmdbaMxgNW4Z7xfBm3UpJX51d9ihDY2pBaoZr9TAgjEmTZdW8HtM8B9TuSN3gQW
ok 8 confirmed transaction has no error
ðŸš€ ~ file: claimResource.test.ts ~ line 230 ~ test ~ createTokenTx Transaction {
  signatures: [
    { signature: null, publicKey: [PublicKey] },
    {
      signature: <Buffer a3 59 b5 ad 64 b4 65 19 7f bf d8 03 7d 07 26 6e 91 08 26 4a a2 6e 7f ab be 38 90 26 0a 8c c5 46 3b 3a aa a8 53 5f a2 26 06 b8 94 30 51 c4 e7 80 04 49 ... 14 more bytes>,
      publicKey: [PublicKey]
    }
  ],
  feePayer: PublicKey {
    _bn: <BN: 7693d2feda931f351c6374c157661dc59dcf8e0ceaaa7ce0a5e05399298d4781>
  },
  instructions: [
    TransactionInstruction {
      keys: [Array],
      programId: [PublicKey],
      data: <Buffer 00 00 00 00 f0 1d 1f 00 00 00 00 00 a5 00 00 00 00 00 00 00 06 dd f6 e1 d7 65 a1 93 d9 cb e1 46 ce eb 79 ac 1c b4 85 ed 5f 5b 37 91 3a 8c f5 85 7e ff ... 2 more bytes>
    },
    TransactionInstruction {
      keys: [Array],
      programId: [PublicKey],
      data: <Buffer 01>
    }
  ],
  recentBlockhash: 'BEoTAcJ3MtBcAuXkqhxy4ZS87fPVd79EP4QTnSF9nNRs',
  nonceInfo: undefined
}
ðŸš€ ~ file: claimResource.test.ts ~ line 234 ~ test ~ claimToken 7TMrpd5C68mGTmcDP1aorAtVRBaeAySb5fJTF7XqqRCu
ðŸš€ ~ file: claimResource.test.ts ~ line 242 ~ test ~ claimTokenRes pMwsTav1b4pzTuJ8e6ckqFFc9mDkmhJdB53yxb1dvDhFaszVq3wALow7RnxzZ5hUs6afWj4nKnTsWbRWMDSihQs
ðŸš€ ~ file: claimResource.test.ts ~ line 245 ~ test ~ secondaryMetadataCreators C5Aszu2E2AydF26hZTmNZ8RHrHTyLuNEt16inqoCPPtq
ok 9 confirmed transaction has no error
ðŸš€ ~ file: claimResource.test.ts ~ line 262 ~ test ~ claimResourceTx Transaction {
  signatures: [
    {
      signature: <Buffer 4c a4 ee 74 44 c6 88 1d 77 9f 69 22 34 e7 74 d6 02 ea 03 99 06 fd 5e a4 a2 76 79 4a ef 22 59 e2 5e 7c 17 22 ff ca e9 bc b9 77 19 1e 28 9a bb 50 7f 44 ... 14 more bytes>,
      publicKey: [PublicKey]
    }
  ],
  feePayer: PublicKey {
    _bn: <BN: 7693d2feda931f351c6374c157661dc59dcf8e0ceaaa7ce0a5e05399298d4781>
  },
  instructions: [
    TransactionInstruction {
      keys: [Array],
      programId: [PublicKey],
      data: <Buffer 00 a0 a4 60 ed 76 4a 1b ff>
    }
  ],
  recentBlockhash: '4eJaGZaTknunaxFjwgBy324yZCrJVqQFtFW8bYPKRNaH',
  nonceInfo: undefined
}
ðŸš€ ~ file: claimResource.test.ts ~ line 269 ~ test ~ claimResourceRes 5NZZugMQNRph5tGFTnPApi2G2rUawDbH9wUjjcyikeqsJQDQSiaiLo4HdiZciNKDjptSDWeqsfZegHNQXuKkS6Lp
ok 10 confirmed transaction has no error
ðŸš€ ~ file: claimResource.test.ts ~ line 274 ~ test ~ token 5uqKHTL6fTud29r89Auiaq5ymC5VMAY2d93CZWW6ePe8
ðŸš€ ~ file: claimResource.test.ts ~ line 276 ~ test ~ createdToken 7TMrpd5C68mGTmcDP1aorAtVRBaeAySb5fJTF7XqqRCu
Assert 1: createdToken.mint.toBase58() === resourceMint.publicKey.toBase58()
Assert 2: createdToken.owner.toBase58() === payer.publicKey.toBase58()
ok 11 should be truthy
ok 12 should be truthy
# claim resource: should fail due to the treasury not empty
ðŸš€ ~ file: claimResource.test.ts ~ line 284 ~ test ~ transactionHandler DQQrxVMCe8FAYQP84i75GtKYNfBNerF4AKF82LebgD9
ðŸš€ ~ file: claimResource.test.ts ~ line 284 ~ test ~ connection http://127.0.0.1:8899/
ðŸš€ ~ file: claimResource.test.ts ~ line 284 ~ test ~ payer DQQrxVMCe8FAYQP84i75GtKYNfBNerF4AKF82LebgD9
ok 13 confirmed transaction has no error
ðŸš€ ~ file: claimResource.test.ts ~ line 300 ~ test ~ store 7Hw1t2xLtxP8A5GWozJAbC6VUXdeoh3kkz5qMuexFngz
ok 14 confirmed transaction has no error
ok 15 confirmed transaction has no error
ðŸš€ ~ file: claimResource.test.ts ~ line 303 ~ test ~ resourceMint DG6ct1bKp1QsZt5hBATk74yJoZxC5z2yx8xZdMn1V8bX
ðŸš€ ~ file: claimResource.test.ts ~ line 303 ~ test ~ vaultOwnerBump 255
ðŸš€ ~ file: claimResource.test.ts ~ line 303 ~ test ~ vaultOwner 6HpJqeeYtshpt44BSmsT3n6amXbeTgJ57QNN1cpYAdR6
ðŸš€ ~ file: claimResource.test.ts ~ line 303 ~ test ~ vault GEPtni5oUqQGHRr8ao9WDRxTjFG1bkY2Jb332iGzNthc
ðŸš€ ~ file: claimResource.test.ts ~ line 303 ~ test ~ sellingResource AtnsXxKxqquKMkGJjNfeoni5qdE6v33s4EqVgqdZ5yyb
ðŸš€ ~ file: claimResource.test.ts ~ line 318 ~ test ~ treasuryMint FzumUgVqQD9539rheT1F4kqgo7TgSA8UEk8TBygPEr8Z
ðŸš€ ~ file: claimResource.test.ts ~ line 323 ~ test ~ userTokenAcc BJcHvcrogypBereHpeu2d4R3ZnnQKRpvVaxmWZVzgnEo
ðŸš€ ~ file: claimResource.test.ts ~ line 326 ~ test ~ startDate 1644776539
ok 16 confirmed transaction has no error
ok 17 confirmed transaction has no error
Here the treasury holder is important to note
ðŸš€ ~ file: claimResource.test.ts ~ line 337 ~ test ~ treasuryHolder 7A6ggF4WjpTk3fRAysJTr8UhsVVsfSHrLBRtckPEuWhh
ðŸš€ ~ file: claimResource.test.ts ~ line 337 ~ test ~ market 377CcPbUVUMG7hLDMmf31Jcs1u1vwSaAnbDYx8CMLfoR
ðŸš€ ~ file: claimResource.test.ts ~ line 352 ~ test ~ tradeHistoryBump 255
ðŸš€ ~ file: claimResource.test.ts ~ line 355 ~ test ~ tradeHistory Dqi6wKy9kH2qagDnD121ojVLv8DEJ7F3qmuh2cwzoqiw
ðŸš€ ~ file: claimResource.test.ts ~ line 359 ~ test ~ newMint B3ThRavVm4XrrD8mr6hTj9GKEdmRJM8U3QbMuKS4uiaa
ðŸš€ ~ file: claimResource.test.ts ~ line 368 ~ test ~ newMintEdition 3sRFFGmsJcThihJCpRR2vN9ZT7ae75X32ZuC78xhxPuV
ðŸš€ ~ file: claimResource.test.ts ~ line 370 ~ test ~ newMintMetadata 2ZUvqrkBsZLKrVEFuzceKqYkamBKrRYPnLMTdrJLRJAf
ðŸš€ ~ file: claimResource.test.ts ~ line 373 ~ test ~ resourceMintMasterEdition 8CatS1TWLEeZ2qk1qE4HEqrzEnMaM5k8tWr2vWfNgVuD
ðŸš€ ~ file: claimResource.test.ts ~ line 375 ~ test ~ resourceMintMetadata 8BEkoVvbJ8Rrtj7EWdX8XHTz7wesaDar8G6wwoWWG1rP
ðŸš€ ~ file: claimResource.test.ts ~ line 377 ~ test ~ resourceMintEditionMarker HLjUNQNFT3ki3UU4xwM7HvjqfVAzSLB3XZPSXbkqdKrs
ðŸš€ ~ file: claimResource.test.ts ~ line 382 ~ test ~ buyTx Transaction {
  signatures: [],
  feePayer: PublicKey {
    _bn: <BN: 32d70e9add8d6b9ac1501d15004d55b404421e5dfbb105529c5d533a717e87c>
  },
  instructions: [
    TransactionInstruction {
      keys: [Array],
      programId: [PublicKey],
      data: <Buffer 66 06 3d 12 01 da eb ea ff ff>
    }
  ],
  recentBlockhash: 'AxUbuqz2QmdJhzo624u6knktYNzDKYtPpZDCg1piiDZ7',
  nonceInfo: undefined
}
ðŸš€ ~ file: claimResource.test.ts ~ line 407 ~ test ~ buyRes 22GTug6nrJciXzyaznxCFPK7uDwjvmnqvVtrQtosAuvGEpk9XCMgx7o1cBPpQf3Nsm42m1uBN6v2cEQaxCfg3HEL
ok 18 confirmed transaction has no error
ðŸš€ ~ file: claimResource.test.ts ~ line 420 ~ test ~ marketTx - Close Market Transaction {
  signatures: [
    {
      signature: <Buffer cd 41 87 da 16 11 d1 98 6d 32 27 86 73 6e 65 73 d5 98 cd e1 5b b8 54 9e 23 08 91 d7 d4 b7 2f c0 00 fa e5 7f 53 79 bb 67 3b 74 36 d7 fc 4b 30 54 9b 76 ... 14 more bytes>,
      publicKey: [PublicKey]
    }
  ],
  feePayer: PublicKey {
    _bn: <BN: 32d70e9add8d6b9ac1501d15004d55b404421e5dfbb105529c5d533a717e87c>
  },
  instructions: [
    TransactionInstruction {
      keys: [Array],
      programId: [PublicKey],
      data: <Buffer 58 9a f8 ba 30 0e 7b f4>
    }
  ],
  recentBlockhash: 'Eidjf5ianopRnAizbE77nKCZcwV5MEjbpGtdwG45QZyU',
  nonceInfo: undefined
}
ðŸš€ ~ file: claimResource.test.ts ~ line 427 ~ test ~ marketRes 36LQqvERWe2PxErEk6tN9GfKBFrkMF5zCPMRPeHgEqav46SXAHj35rqrngNmJq2J5GSH61JmA5GNwVagsSUpV2VW
ok 19 confirmed transaction has no error
ðŸš€ ~ file: claimResource.test.ts ~ line 433 ~ test ~ metadata 8BEkoVvbJ8Rrtj7EWdX8XHTz7wesaDar8G6wwoWWG1rP
ðŸš€ ~ file: claimResource.test.ts ~ line 436 ~ test ~ createTokenTx Transaction {
  signatures: [
    { signature: null, publicKey: [PublicKey] },
    {
      signature: <Buffer ba e3 cc 21 80 98 9f 2c 38 8d 46 b7 2f 0d cf 91 11 b0 21 68 a9 36 60 e9 eb 1b d0 f0 0a 0f e8 62 61 f3 0f 36 26 93 0a d2 ba 6a cc a2 0f 0a ff c1 e6 a8 ... 14 more bytes>,
      publicKey: [PublicKey]
    }
  ],
  feePayer: PublicKey {
    _bn: <BN: 32d70e9add8d6b9ac1501d15004d55b404421e5dfbb105529c5d533a717e87c>
  },
  instructions: [
    TransactionInstruction {
      keys: [Array],
      programId: [PublicKey],
      data: <Buffer 00 00 00 00 f0 1d 1f 00 00 00 00 00 a5 00 00 00 00 00 00 00 06 dd f6 e1 d7 65 a1 93 d9 cb e1 46 ce eb 79 ac 1c b4 85 ed 5f 5b 37 91 3a 8c f5 85 7e ff ... 2 more bytes>
    },
    TransactionInstruction {
      keys: [Array],
      programId: [PublicKey],
      data: <Buffer 01>
    }
  ],
  recentBlockhash: 'Cas4ZocytNpuPadNYBuvbnRiinXFL3qntFzSYyzZDaAU',
  nonceInfo: undefined
}
ðŸš€ ~ file: claimResource.test.ts ~ line 440 ~ test ~ claimToken FALTCpMNLdZ6odH4GU9not1k6GUXNhkLFBuuVLGCYHcB
ðŸš€ ~ file: claimResource.test.ts ~ line 448 ~ test ~ claimTokenRes 2JCxkoVqjgkx5UWv2MzzavSS57WpgVaDbZsVUB2GTeyw3b6qYmo3AZndxYR49zqLjPFdcL3imLPDMFejg7xRqJhv
ðŸš€ ~ file: claimResource.test.ts ~ line 451 ~ test ~ secondaryMetadataCreators Cm6oGjaEEYh4YpNJ41qzYvBr6crCaK7Gfe1ZoKDNuUT3
ok 20 confirmed transaction has no error
ðŸš€ ~ file: claimResource.test.ts ~ line 468 ~ test ~ claimResourceTx Transaction {
  signatures: [
    {
      signature: <Buffer 2d 53 4a 15 4e 25 ff 34 12 eb be 9e 13 35 04 0e 4f b0 d6 0f 12 bc 75 fe b6 3b 1d 55 e3 c1 7d 56 58 4a 6e 7b e1 80 04 96 0d 86 1d 0b c4 e2 92 c4 be 26 ... 14 more bytes>,
      publicKey: [PublicKey]
    }
  ],
  feePayer: PublicKey {
    _bn: <BN: 32d70e9add8d6b9ac1501d15004d55b404421e5dfbb105529c5d533a717e87c>
  },
  instructions: [
    TransactionInstruction {
      keys: [Array],
      programId: [PublicKey],
      data: <Buffer 00 a0 a4 60 ed 76 4a 1b ff>
    }
  ],
  recentBlockhash: 'G16LM7zqMimVBFBxSa8KKtmR5qu4RWZAXr6LPjVGXmGk',
  nonceInfo: undefined
}
In next line, the transaction should fail, expected transaction to fail due to 'treasury not empty
Transaction simulation failed: Error processing Instruction 0: custom program error: 0x178a 
    Program SaLeTjyUa5wXHnGuewUSyJ5JWZaHwz3TxqUntCE9czo invoke [1]
    Program log: Instruction: ClaimResource
    Program log: Custom program error: 0x178a
    Program SaLeTjyUa5wXHnGuewUSyJ5JWZaHwz3TxqUntCE9czo consumed 25816 of 200000 compute units
    Program SaLeTjyUa5wXHnGuewUSyJ5JWZaHwz3TxqUntCE9czo failed: custom program error: 0x178a
ok 21 error encountered
ok 22 match '/0x178a/i' in error message

1..22
# tests 22
# pass  22

# ok
```